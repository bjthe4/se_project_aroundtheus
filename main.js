!function(){"use strict";const e={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=document.querySelector(".js-add-modal"),o=document.querySelector(".js-edit-modal"),r=document.querySelector(".js-preview-modal"),s=document.querySelector("#profile-edit-button"),n=document.querySelector("#profile-edit-modal"),i=(document.querySelector(".modal__preview-image"),document.querySelector("#preview-caption"),document.querySelector("#profile-add-modal")),l=(o.querySelector("#profile-close-modal"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),a=document.querySelector("#profile-title-description"),c=(n.querySelector(".modal__form"),document.querySelector("#profile-add-button")),u=(t.querySelector("#add-close-modal"),document.querySelector("#modal__form-add"),document.querySelector(".cards__list"),document.querySelector("#card-template").content.firstElementChild,document.querySelector("#preview-modal"),r.querySelector("#preview-close-modal"),o.querySelector(".modal__form")),d=t.querySelector(".modal__form");class m{constructor(e,t,o){let{name:r,link:s}=e;this._name=r,this._link=s,this._cardSelector=t,this._handleImageClick=o}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__trash-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick({name:this._name,link:this._link})))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._setEventListeners(),this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._link,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement}}var _=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class p{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),console.log(t),this._closebutton=this._popupElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){console.log(this._popupElement),this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closebutton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target===this._popupElement&&this.close()}))}}class h extends p{constructor(e){let{popupSelector:t,handleFormSubmit:o}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=o,this._submitButton=this._popupElement.querySelector(".modal__button")}_getInputValues(){this._inputElements=this._popupForm.querySelectorAll(".modal__input");const e={};return this._inputElements.forEach((t=>{e[t.name]=t.value})),e}reset(){this._popupForm.reset()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const E=new class{constructor(e,t){let{items:o,renderer:r}=e;this._items=o,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}],renderer:e=>{const t=b(e);E.addItem(t)}},".cards__list");E.renderItems();const S=new class extends p{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._modalPreviewImageElement=this._popupElement.querySelector(".modal__preview-image"),this._previewCaptionElement=this._popupElement.querySelector("#preview-caption")}open(e){this._modalPreviewImageElement.src=e.link,this._modalPreviewImageElement.alt=e.name,this._previewCaptionElement.textContent=e.name,super.open()}}({popupSelector:"#preview-modal"});S.setEventListeners();const v=new h({popupSelector:"#profile-add-modal",handleFormSubmit:function(e){const t=b({name:e.title,link:e.description});E.addItem(t),v.reset(),v.close(),w.toggleButtonState()}});v.setEventListeners();const y=new class{constructor(e,t){this._name=document.querySelector(e),this._about=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(e,t){console.log(e,t),this._name.textContent=e,this._about.textContent=t}}(".profile__title",".profile__description"),f=new h({popupSelector:"#profile-edit-modal",handleFormSubmit:function(e){y.setUserInfo(e.title,e.description),f.close()}}),q=new _(e,u),w=new _(e,d);function g(e){S.open(e)}function b(e){return new m(e,"#card-template",g).getView()}q.enableValidation(),w.enableValidation(),f.setEventListeners(),s.addEventListener("click",(()=>{const e=y.getUserInfo();l.value=e.name,a.value=e.about,f.open()})),c.addEventListener("click",(()=>v.open(i)))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBWXlCLGFBQ3BETyxFQUFpQjdDLE9BQ25CLElBaEhNOEMsRUFBb0IsSUFBSUMsRUFDNUJuSSxFQUNBaUIsR0FFSTBHLEVBQW1CLElBQUlRLEVBQWNuSSxFQUFvQm9CLEdBMkMvRCxTQUFTSyxFQUFpQjhGLEdBQ3hCSCxFQUFXakMsS0FBS29DLEVBQ2xCLENBRUEsU0FBU0osRUFBV0YsR0FHbEIsT0FGYSxJQUFJNUYsRUFBSzRGLEVBQVUsaUJBQWtCeEYsR0FDekJnQixTQUUzQixDQWpEQXlGLEVBQWtCekQsbUJBQ2xCa0QsRUFBaUJsRCxtQkFDakJ3RCxFQUFpQnpDLG9CQXNIakI3RSxFQUFrQndCLGlCQUFpQixTQUFTLEtBQzFDLE1BQU1vRixFQUFPSyxFQUFTRyxjQUN0QmpILEVBQWtCb0YsTUFBUXFCLEVBQUs3RixLQUMvQlgsRUFBd0JtRixNQUFRcUIsRUFBS00sTUFDckNJLEVBQWlCOUMsTUFBTSxJQUd6Qm5FLEVBQWVtQixpQkFBaUIsU0FBUyxJQUN2Q3FGLEVBQWFyQyxLQUFLdEUsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlcmluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnIFwiLFxuICB9LFxuXTtcblxuLyogZWxlbWVudHMgKi9cbmV4cG9ydCBjb25zdCBtb2RhbEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtYWRkLW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IG1vZGFsRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtZWRpdC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBtb2RhbGVQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy1wcmV2aWV3LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBtb2RhbFByZXZpZXdJbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXG4pO1xuZXhwb3J0IGNvbnN0IG1vZGFsUHJldmlld0ltYWdlQ2FwdGlvbiA9XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1jYXB0aW9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbEFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQ2xvc2VNb2RhbCA9IG1vZGFsRWRpdC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWNsb3NlLW1vZGFsXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS10aXRsZS1kZXNjcmlwdGlvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxuZXhwb3J0IGNvbnN0IGFkZE1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkTW9kYWxDbG9zZUJ1dHRvbiA9IG1vZGFsQWRkLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNsb3NlLW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRzQWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxfX2Zvcm0tYWRkXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcmV2aWV3Q2xvc2VNb2RhbCA9IG1vZGFsZVByZXZpZXcucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJldmlldy1jbG9zZS1tb2RhbFwiXG4pO1xuZXhwb3J0IGNvbnN0IGVkaXRGb3JtRWxlbWVuZXQgPSBtb2RhbEVkaXQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBhZGRGb3JtRWxlbWVuZXQgPSBtb2RhbEFkZC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuXG4vKmV4cG9ydCBjb25zdCBteVZhcmlhYmxlcyA9IHtcbiAgbW9kYWxBZGQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtYWRkLW1vZGFsXCIpLFxufTsqL1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gXCIuY2FyZF9fbGlrZS1idXR0b25cIlxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgICB9KTtcblxuICAgIC8vXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgfSk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pXG4gICAgICApO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICAvLyBnZXQgdGhlIGNhcmQgdmlld1xuICAgIC8vIHNldCBldmVudG4gbGlzdGVuZXJzXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgLy8gcmV0dXJuIHRoZSBjYXJkXG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbi8vY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcigpO1xuLy9lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uO1xuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgY29uc29sZS5sb2cocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VidXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMuX3BvcHVwRWxlbWVudCk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jbG9zZWJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0RWwubmFtZV0gPSBpbnB1dEVsLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuICByZXNldCgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBpbml0aWFsQ2FyZHMsXG4gIG1vZGFsQWRkLFxuICBtb2RhbEVkaXQsXG4gIG1vZGFsZVByZXZpZXcsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwcm9maWxlRWRpdE1vZGFsLFxuICBtb2RhbFByZXZpZXdJbWFnZUVsZW1lbnQsXG4gIG1vZGFsUHJldmlld0ltYWdlQ2FwdGlvbixcbiAgcHJvZmlsQWRkTW9kYWwsXG4gIHByb2ZpbGVDbG9zZU1vZGFsLFxuICBwcm9maWxlVGl0bGUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxuICBwcm9maWxlRWRpdEZvcm0sXG4gIGFkZE1vZGFsQnV0dG9uLFxuICBhZGRNb2RhbENsb3NlQnV0dG9uLFxuICBjYXJkc0FkZEZvcm0sXG4gIGNhcmRMaXN0RWwsXG4gIGNhcmRUZW1wbGF0ZSxcbiAgcHJldmlld01vZGFsLFxuICBwcmV2aWV3Q2xvc2VNb2RhbCxcbiAgZWRpdEZvcm1FbGVtZW5ldCxcbiAgYWRkRm9ybUVsZW1lbmV0LFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9jYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VyaW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcFVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cbi8qIENsYXNzIEluc3RhbmNlcyAqL1xuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgIC8vcmVuZGVyQ2FyZChjYXJkRGF0YSk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcFVwV2l0aEltYWdlKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjcHJldmlldy1tb2RhbFwiLFxufSk7XG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZS1hZGQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlQWRkQ2FyZFN1Ym1pdCxcbn0pO1xubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQsXG59KTtcblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBlZGl0Rm9ybUVsZW1lbmV0XG4pO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkRm9ybUVsZW1lbmV0KTtcblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qXG5jb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgKG9iaikgPT4ge1xuICBjb25zb2xlLmxvZyhvYmopO1xufSk7ICBcbmNhcmQuZ2V0VmlldygpO1xuKi9cblxuLyogZnVuY3Rpb25zICovXG5cbi8vIGZ1bmN0aW9uIHRvZ2dsZU1vZGFsV2luZG93KG1vZGFsKSB7XG4vLyAgIG1vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJtb2RhbF9vcGVuZWRcIik7XG4vLyB9XG5cbi8qZnVuY3Rpb24gaGFuZGxlT3ZlcmxheUNsaWNrKGV2ZW50KSB7XG4gIGlmIChBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QpLmluY2x1ZGVzKFwibW9kYWxcIikpIHtcbiAgICBjbG9zZU1vZGFsKGV2ZW50LnRhcmdldCk7XG4gIH1cbn0qL1xuXG4vKmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVDbG9zZSk7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVPdmVybGF5Q2xpY2spO1xufSovXG5cbi8qZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVDbG9zZSk7XG4gIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVPdmVybGF5Q2xpY2spO1xufSovXG5cbi8vZnVuY3Rpb24gcHJldmlld1BpY3R1cmUoKSB7XG4vLyBwcmV2aWV3TW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbi8vIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuLy8gY2FyZHMuY2xhc3NMaXN0LnRvZ2dsZShcIm1vZGFsX29wZW5lZFwiKTtcbi8vfVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpIHtcbiAgcG9wdXBJbWFnZS5vcGVuKGRhdGEpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdldFZpZXcoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIC8qY29uc3QgbmV3Q2FyZCA9IGdldENhcmRFbGVtZW50KHsgbmFtZSwgbGluayB9KTsqL1xuICBjb25zdCBjYXJkRGF0YSA9IHsgbmFtZTogaW5wdXRWYWx1ZXMudGl0bGUsIGxpbms6IGlucHV0VmFsdWVzLmRlc2NyaXB0aW9uIH07XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gIG5ld0NhcmRQb3B1cC5yZXNldCgpO1xuICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcbiAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xufVxuXG4vKiBWYWxpZGF0aW9uICovXG5cbi8qZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICBjb25zdCBjYXJkTGlrZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpO1xuICBjb25zdCBpbWFnZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcblxuICBpbWFnZUVsLmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gIGltYWdlRWwuc3JjID0gY2FyZERhdGEubGluaztcblxuICBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcblxuICBpbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgbW9kZWxQcmV2aWV3SW1hZ2VFbGVtZW50LnNyYyA9IGNhcmREYXRhLmxpbms7XG4gICAgbW9kZWxQcmV2aWV3SW1hZ2VFbGVtZW50LmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gICAgbW9kYWxQcmV2aWV3SW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcbiAgICBwcmV2aWV3UGljdHVyZSgpO1xuICB9KTtcblxuICBjYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTGlrZUljb24pO1xuICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZURlbGV0ZUNhcmQpO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn0qL1xuXG4vKmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEsIGNvbnRhaW5lcikge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XG4gIC8vIGNvbnRhaW5lci5wcmVwZW5kKGNhcmQuZ2V0VmlldygpKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmQuZ2V0VmlldygpKTtcbn0qL1xuXG4vKiBldmVudCBoYW5kZWxlcnMgKi9cblxuLypjb25zdCBoYW5kbGVMaWtlSWNvbiA9IChldnQpID0+IHtcbiAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xufTsqL1xuXG4vKmNvbnN0IGhhbmRsZURlbGV0ZUNhcmQgPSAoZXZ0KSA9PiB7XG4gIGV2dC50YXJnZXQuY2xvc2VzdChcIi5jYXJkXCIpLnJlbW92ZSgpO1xufTsqL1xuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChpbnB1dFZhbHVlcykge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy50aXRsZSwgaW5wdXRWYWx1ZXMuZGVzY3JpcHRpb24pO1xuICBwcm9maWxlRWRpdFBvcHVwLmNsb3NlKCk7XG59XG5cbi8qZnVuY3Rpb24gaGFuZGxlRXNjYXBlQ2xvc2UoZSkge1xuICBjb25zdCBrZXkgPSBlLmNvZGU7XG5cbiAgaWYgKGtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IG9wZW5Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xuXG4gICAgY2xvc2VNb2RhbChvcGVuTW9kYWwpO1xuICB9XG59Ki9cblxuLyogZXZlbnQgbGlzdGVuZXJzICovXG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IGRhdGEubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBkYXRhLmFib3V0O1xuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5hZGRNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgbmV3Q2FyZFBvcHVwLm9wZW4ocHJvZmlsQWRkTW9kYWwpXG4pO1xuXG4vKmNhcmRzQWRkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgbmFtZSA9IGNhcmRzQWRkRm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIikudmFsdWU7XG4gIGNvbnN0IGxpbmsgPSBjYXJkc0FkZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICByZW5kZXJDYXJkKHsgbmFtZSwgbGluayB9LCBjYXJkTGlzdEVsKTtcbiAgY2FyZHNBZGRGb3JtLnJlc2V0KCk7XG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgY2xvc2VNb2RhbChwcm9maWxBZGRNb2RhbCk7XG59KTsqL1xuXG4vKmNvbnN0IG5ld0NhcmQgPSBnZXRDYXJkRWxlbWVudCh7IG5hbWUsIGxpbmsgfSk7Ki9cbi8vIHByb2ZpbGVDbG9zZU1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuLy8gICBwcm9maWxlRWRpdFBvcHVwLmNsb3NlKHByb2ZpbGVFZGl0TW9kYWwpXG4vLyApO1xuXG4vLyBhZGRNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuLy8gICBuZXdDYXJkUG9wdXAuY2xvc2UocHJvZmlsQWRkTW9kYWwpXG4vLyApO1xuXG4vLyBwcmV2aWV3Q2xvc2VNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbi8vICAgcG9wdXBJbWFnZS5jbG9zZShwcmV2aWV3TW9kYWwpXG4vLyApO1xuXG4vL2luaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkRGF0YSkgPT4ge1xuLy8gY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSk7XG4vL3JlbmRlckNhcmQoY2FyZERhdGEsIGNhcmRMaXN0RWwpO1xuLy8gY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsICgpID0+IHtcbi8vICAgY29uc29sZS5sb2coMTIzKTtcbi8vIH0pO1xuXG4vLyBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0VmlldygpO1xuLy99KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XG4gIH1cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wVXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX21vZGFsUHJldmlld0ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIlxuICAgICk7XG4gICAgdGhpcy5fcHJldmlld0NhcHRpb25FbGVtZW50ID1cbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctY2FwdGlvblwiKTtcbiAgfVxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl9tb2RhbFByZXZpZXdJbWFnZUVsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX21vZGFsUHJldmlld0ltYWdlRWxlbWVudC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fcHJldmlld0NhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBhYm91dCkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dCk7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIGNvbnNvbGUubG9nKG5hbWUsIGFib3V0KTtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG59XG4iXSwibmFtZXMiOlsidmFsaWRhdGlvblNldHRpbmdzIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJtb2RhbEFkZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1vZGFsRWRpdCIsIm1vZGFsZVByZXZpZXciLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxBZGRNb2RhbCIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJhZGRNb2RhbEJ1dHRvbiIsImVkaXRGb3JtRWxlbWVuZXQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJhZGRGb3JtRWxlbWVuZXQiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJnZXRWaWV3IiwiY2xvbmVOb2RlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJzZXR0aW5ncyIsImZvcm1FbCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsImNvbnNvbGUiLCJsb2ciLCJfY2xvc2VidXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dEVsZW1lbnRzIiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInJlc2V0Iiwic2VjdGlvbiIsImNsYXNzU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRGF0YSIsImNhcmRFbGVtZW50IiwiY3JlYXRlQ2FyZCIsInBvcHVwSW1hZ2UiLCJfbW9kYWxQcmV2aWV3SW1hZ2VFbGVtZW50IiwiX3ByZXZpZXdDYXB0aW9uRWxlbWVudCIsImRhdGEiLCJuZXdDYXJkUG9wdXAiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYWRkRm9ybVZhbGlkYXRvciIsInVzZXJJbmZvIiwiYWJvdXQiLCJfYWJvdXQiLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwicHJvZmlsZUVkaXRQb3B1cCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=